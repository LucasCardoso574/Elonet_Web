---
const items = [
  { year: "1997", text: "Fundação da empresa e início das operações no setor financeiro habitacional." },
  { year: "2005", text: "Expansão da atuação e consolidação da presença nacional." },
  { year: "2010", text: "Crescimento do portfólio e fortalecimento dos processos internos." },
  { year: "2015", text: "Modernização tecnológica e evolução das soluções digitais." },
  { year: "2020", text: "Consolidação no mercado com foco em eficiência e escala." },
  { year: "2025", text: "Atuação sólida orientada por inovação, qualidade e segurança." }
];
---

<section class="history">
  <header class="header">
    <h2>Nossa História</h2>

    <div class="nav">
      <button class="btn" id="prev" aria-label="Anterior">‹</button>
      <button class="btn" id="next" aria-label="Próximo">›</button>
    </div>
  </header>

  <div class="container">
    <div class="scroller" id="scroller" tabindex="0" aria-label="Linha do tempo">
      <!-- trilho (linha + bolinhas) -->
      <div class="rail" aria-hidden="true">
        <span class="rail-line"></span>
        {items.map(() => (
          <span class="rail-dot"></span>
        ))}
      </div>

      <!-- cards (ano + texto) -->
      <div class="cards">
        {items.map((item) => (
          <article class="card">
            <div class="year">{item.year}</div>
            <p class="text">{item.text}</p>
          </article>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  const scroller = document.getElementById("scroller");
  const prev = document.getElementById("prev");
  const next = document.getElementById("next");

  function scrollByCard(direction) {
    const card = scroller.querySelector(".card");
    const cards = scroller.querySelector(".cards");
    const gap = parseFloat(getComputedStyle(cards).columnGap || getComputedStyle(cards).gap || "0");
    const step = card.getBoundingClientRect().width + gap;
    scroller.scrollBy({ left: direction * step, behavior: "smooth" });
  }

  prev.addEventListener("click", () => scrollByCard(-1));
  next.addEventListener("click", () => scrollByCard(1));

  scroller.addEventListener("keydown", (e) => {
    if (e.key === "ArrowLeft") scrollByCard(-1);
    if (e.key === "ArrowRight") scrollByCard(1);
  });
</script>

<style>
:root{
  --brand: #0B6B1D;
  --text: #0b1220;
  --muted: #475569;
  --line: rgba(11, 107, 29, 0.45);

  /* tamanhos para ficar igual ao exemplo azul */
  --dot: 14px;
  --rail-h: 40px;

  /* controle dos cards */
  --card-w: 260px;
  --gap: 4rem;
}

.history{
  padding: 5rem 1rem;
  background: #fff;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}

.header{
  max-width: 1200px;
  margin: 0 auto 2.25rem auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
}

.header h2{
  margin: 0;
  font-size: 2.2rem;
  font-weight: 600;
  letter-spacing: -0.02em;
  color: var(--text);
}

/* NAV */
.nav{ display:flex; gap:.75rem; }

.btn{
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(2,6,23,0.10);
  background: rgba(2,6,23,0.05);
  color: rgba(2,6,23,0.65);
  font-size: 28px;
  cursor:pointer;
  transition: 150ms ease;
}
.btn:hover{ background: rgba(2,6,23,0.08); color: rgba(2,6,23,0.9); }

.container{ max-width: 1200px; margin: 0 auto; }

/* SCROLLER */
.scroller{
  overflow-x:auto;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling: touch;
  padding: 0 18px 18px 18px;
}
.scroller::-webkit-scrollbar{ display:none; }

/* ✅ GRID COMPARTILHADO (RAIL E CARDS) */
.rail,
.cards{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: var(--card-w);
  column-gap: var(--gap);
  width: max-content; /* vira um “trilho” longo que rola */
}

/* TRILHO */
.rail{
  position: relative;
  height: var(--rail-h);
  align-items: center;
  margin-bottom: 10px; /* distância do trilho pro ano */
}

/* linha reta (continua, igual a azul) */
.rail-line{
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--line);
  top: 50%;
  transform: translateY(-50%);
  z-index: 0;
}

/* bolinhas CENTRALIZADAS em cada coluna */
.rail-dot{
  width: var(--dot);
  height: var(--dot);
  border-radius: 999px;
  background: var(--brand);
  justify-self: center; /* ✅ centro do “card” */
  z-index: 1;
}

/* CARDS */
.card{
  width: var(--card-w);
}

.year{
  font-size: 1.55rem;
  font-weight: 600;
  color: var(--text);
  text-align: left;
}

.text{
  margin: .55rem 0 0 0;
  font-size: 1rem;
  line-height: 1.55;
  color: var(--muted);
  max-width: 26ch;
}

/* RESPONSIVO */
@media (max-width: 768px){
  :root{
    --card-w: 230px;
    --gap: 2.5rem;
    --dot: 12px;
  }
  .header h2{ font-size: 1.85rem; }
}
</style>
